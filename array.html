<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Array</title>
</head>
<body>
    <h1>Array</h1>
    <script>
        //create array
        // const numbers = [1,2,3,4,5]
        const numbs =[];
        for(let i=0;i< 10; i++){
            numbs.push(i);
        }

        //loop array
        //for .. in --> return index of array
        //for ..of ---> return item of array
        // for(const numb of numbs){
        //     console.log('for...of',number)
        // }

        /*push
        -add item to the end array
        - mutable array
        */
       /* pop
         - remove item at the end array
         - mutable array
       */

        const animals = [];
        for (let i=0; i<10; i++){
            animals.push({
                id: Date.now(),
                name: `Animal ${i}`
            });
        }
        const itemPoped = animals.pop();
        console.log('Push & Pop ', {itemPoped, animals});
        //splice
        const fruits= ['banana', 'Orange', 'apple', 'mango','lemon'];
        fruits.splice(2,2); 
        console.log('splice 1:', fruits);

        const intruments = ['piano','organ','madarin','clown'];
        //output intruments = ['piano', 'organ', 'madarin', 'drum', clown]
        // intruments.splice = (3,0,'drum');
        //output intruments = ['piano','drum', clown]
        intruments.splice (1,2,'drum');
        

        /*indexOf 
        -Can't use with item object
        */

        /*filter
        */
       /*findIndex --> return index of array
       */
        const moviesFlim = [
            {
                id:1, title:'Nu hon bac ti',
                id :2, title :'attack on titan'
            }
        ]
        const  indexMovieTitan = moviesFlim.findIndex(movie => movie.id ===2);
        if (indexMovieTitan !== -1){
        console.log('demo findIndex:', indexMovieTitan)
        }
        /* map
        */
        const moviesAge = moviesFlim.map(movie => ({
            ...movie,
            age:20
        }))
        //sort
        const countries = [
            {id:1, title:'VN'},
            {id:2, title:'US'},
            {id:3, title:'UK'},
            {id:4, title:'JP'},
            {id:5, title:'CN'},
        ];

        const countrySort1 = countries.sort(function(a,b){
            if (a.title.toLowerCase() > b.title.toLowerCase()){
                return -1;
            }
            if (a.title.toLowerCase() < b.title.toLowerCase()){
                return 1;
            }
            return 0

        });
        console.log('demo sort countries: ', countrySort1)
        //sort - compareFunction

        /*
        Array: some
        */
        //Array: every

        //reference item of array, shallow clone, deep clone
        const books = [
            {id: 1, author: 'tony'},
            {id: 2, author: 'huy'},
            {id: 3, author: 'thanh'},
        ];
        const idFromBe=2;
        //prevent mutable default value -> clone new array
        // const newBooks =[...books];//shadow clone -> copy value, but same reference
        const newBooks = JSON.parse(JSON.stringify(books));

        const indexBook = newBooks.findIndex(book => book.id === idFromBe);
        if ( indexBook !== -1){
            newBooks[indexBook].author = 'Picaso'; //author direct deafult array
        }
        console.log('update books:',{
            books,
            newBooks,
        });


        /*Array: reduce
        - accumulator
        - currentValue
        - currentIndex
        - array
        */
       const numberReduce = [10, 30, 20, 50, 22,21];
       const resultReduceNumber = numberReduce.reduce((acc,currValue,currIndex,array)=>{
        console.log('Number reduce:',{
            acc,currValue,currIndex,array
        })
        // loop 1: acc = 0, currValue = 10 -> 10
        // loop 2: acc = 10, currValue = 30 -> 40
        // loop 3: acc = 40, currValue = 20 -> 60
        // loop 4: acc = 60, currValue  = 50 -> 110
        // loop 5: acc = 110, currValue = 22 -> 132
        // loop 6: acc = 132, currValue  = 21 -> 153        
        return acc +currValue;
        
       },0 );

       /*convert array -> object js
       {
       10: true,
       30: true,
       20: true,
       50: true,
        22: true,
       21: false,

       }
       */
      const resultFullObjectTwo = numberReduce.reduce((acc,currValue)=>{
        console.log('resultFullObjectTwo:', {acc,currValue})
        acc[currValue] = currValue %2 === 0;
        return acc;
      },[])
      console.log('resultFullObjectTwo: ', resultFullObjectTwo);

      //vi du total reduce
      const carts = [
        {id: 1, name:'iphone', price: 200, quality: 2},
        {id: 2, name:'samsung', price: 150, quality: 5},
        {id: 3, name:'macbook', price: 332, quality: 3},

      ]
      const totalPrice = carts.reduce((acc, curr)=>{
        //1:  += 200 *2 --> 400
        //2:  400 += 150 *5 --> x
        //3: x +n 332 *3 --> total
        acc += curr.price * curr.quality;
        return acc;
      },0);
      console.log('total price: ', totalPrice);


</script>
</body>
</html>